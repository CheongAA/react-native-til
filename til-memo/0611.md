# iOS 배포

## 0.  iOS 디바이스 테스트

- 애플 개발자 계정을 생성한다.
- iOS/프로젝트명.xcworkspace 파일을 선택하여 xcode를 실행시킨다.
- 디바이스를 USB와 연결한다.
- Xcode 왼쪽 상단에 연결된 디바이스가 뜨는 지 확인한다.
- signing이 되어있다면 실행 버튼을 통해 빌드한다.
- signing이 되어있지 않다면 target - signing & capabilities 탭에서 설정한후 실행 버튼을 통해 빌드한다.
- 연결된 스마트폰의 개발자 앱 > 신뢰를 눌러 다운받은 개발자 앱을 신뢰하도록 설정한다.

## 1. 애플 개발자 프로그램 등록

- 1년 단위로 99달러 결제를 해야함
- 연결된 디바이스의 설정을 열고, 암호 및 보안 > 이중 인증을 설정한다.
- 애플 개발자 사이트로 이동하여  개발자 프로그램을 등록한다.

## 2. 인증서 및 프로비저닝 프로파일

- 애플은 검증된 개발자들만 앱을 개발할 수 있도록 설정했다. 이를 위해 인증서 발급이 필요하다.
- 프로비저닝 프로파일은 개발자 계정과 디바이스를 연결하는 역할을 한다.

- 인증서

 애플 개발자 사이트에서 certificates, IDs & Profiles를 선택하여 인증서 발급 사이트로 들어간다.

인증서를 다운받아 키체인에 등록한 뒤 인증서 지원을 실행시킨다. 인증서 지원을 통해 받은 CSR 파일을 애플 개발자 사이트에 업로드 한다. 인증서를 다운로드하여 키체인에 등록한다. 

- 앱식별자

애플 개발자 사이트의 certificates, IDs & Profiles에서 identifiers를 선택하고 식별자를 생성한다.

- 디바이스 등록

배포용이 아닌 개발용으로 앱을 디바이스에서 테스트 하기위해 애플 개발자 사이트에 디바이스를 등록해야 한다.

아이튠즈를 통해 연결된 디바이스의 UUID를 복사한 후 애플 개발자 사이트의 certificates, IDs & Profiles > Devices에 등록한다.

- 프로비저닝 프로파일

애플 개발자 사이트의 certificates, IDs & Profiles > Profiles 를 통해 개발용, 배포용 프로비저닝 프로파일을 생성할 수 있다.

## 3. 빌드

- 앱 스토어 커넥트를 사용하여 신규 앱을 생성하고 정보를 설정한다.
- ./iOS/프로젝트이름/info.plist 파일을 수정한다.
- ./iOS/프로젝트이름.xcworkspace를 xcode로 실행하여 product > scheme > edit Scheme를 선택한다. build configuration를 release로 변경한다.
- 시뮬레이터를 generic iOS device로 변경하고 앱을 빌드하고 앞서만든 인증서와 프로비저닝 프로파일을 연결하여 빌드한다.

## 4. 배포

- 앱 스토어 커넥트에서 앱 배포 준비가 끝났다는 메일을 받으면 앞서 빌드한 파일을 선택해 배포한다.
- 심사 후 별 이상이 없다면 배포가 완료된다.

⇒ iOS 에서 앱을 배포하기 위해서는 애플 개발자 계정을 생성하고, 개발자 프로그램에 등록한 후, 인증서와 프로비저닝 파일을 생상해야 한다. 프로비저닝 파일을 생성하기 위해서는 인증서, 앱 식별자, 디바이스가 필요하다. 앱 스토어 커넥트에서 배포할 앱 정보를 입력하고 xcode를 사용하여 앱을 빌드한 후 앱스토어 커넥트에 업로드하면 완료! 

# Android 배포

## 0. 디바이스 테스트

- 디바이스의 개발자 모드 활성화
- 디버깅 기능 활성화
- 연결 후 리액트 네이티브 실행 명령어 입력
- 명령어로 안된다면 안드로이드 스튜디오로 실행

## 1. 구글 플레이 개발자 등록

- 구글 계정 생성
- 수수료 25달러 ( 한 번만 발생 )
- 구글 플레이 개발자 등록 사이트로 이동 후 개발자 등록

## 2. 서명 키 생성 및 설정

- ./android/app/ 에서 서명 키 생성 명령어 실행
- ./android/gradle.properties와 ./android/app/build.gradle 파일을 열고 수정한다.
- 리액트 네이티브 프로젝트의 android 폴더에서 ./gradlew assembleRelease 명령어를 입력하면 apk 파일을 얻을 수 있다.
- ./android/app/build.gradle 파일을 수정하여 ./gradlew app:assembleRelease 명령어를 이용하면 최적화된 배포 파일을 얻을 수 있다.

## 3. 구글 플레이 배포

- 구글 플레이의 안드로이드 앱 배포를 등록한다.

⇒ 애플 앱 심사를 먼저 진행하고, 통과한 경우 구글 앱 심사를 진행하는 것을 권장한다.